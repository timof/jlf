#!/usr/local/bin/php
<?php


$debug = 1;
$global_format = 'cli';
$header_printed = true; //no header required

require_once('cl/cl_common.php');
require_once('cl/cl_commands.php');

$do_echo = false;
$verbose = false;
$command = $argv[ 1 ];

while( true ) {
  // debug( $command, 'parsing:' );
  switch( $command[ 0 ] ) {
    case 'v':
      $verbose = true;
      $command = substr( $command, 1 );
      echo "cl: start: $utc\n";
      continue 2;
    case 'e':
      $do_echo = true;
      $command = substr( $command, 1 );
      continue 2;
    case 'q':
      cl_query( $argv[ 2 ] );
      break;
    case 'i':
      echo cl_insert( $argv[ 2 ] );
      break;
    case 'u':
      echo cl_update( $argv[ 2 ], $argv[ 3 ] );
      break;
    case 's':
      echo cl_sql( $argv[ 2 ] );
      break;
    default:
      echo "invalid command\n";
      break;
  }
  break;
}

if( $verbose ) {
  echo "cl: end: " . datetime_unix2canonical( time() );
}


?>
